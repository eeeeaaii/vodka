v2:~(|run ~(_bind @menu &(|[doc](_@start-changing-background @start-osc-alpha @start-osc-hue @start-osc-hue-change-bg_)|)_) ~(_bind @help @menu_) ~(_bind @start-changing-background &" nex"(|~(|do-on-every &" n"(|~(_random-background-color @n_)|) @nex ~(_fudge-interval #100_)|)|)_) ~(_bind @start-osc-alpha &" letter"(|~(|do-with-param-on-every &" letter param"(|~(_alpha @letter ~(_::pl:: %.5 ~(_::ti:: %.5 ~(_sin ~(_to-float @param_)_)_)_)_)|) @letter ~(_fudge-interval #100_)|)|)_) ~(_bind @start-osc-hue &" letter"(|~(|do-with-param-on-every &" letter param"(|~(_let @h ~(_modulo @param #256_)_) ~(|set-nex-style $"color" ~(_string-cat $"hsl(" ~(_to-string @h_) $", 50%, 50%)"_) @letter|)|) @letter ~(_fudge-interval #100_)|)|)_) ~(_bind @start-osc-hue-change-bg &" letter"(|~(|do-with-param-on-every &" nex param"(|~(_let @h ~(_modulo @param #256_)_) ~(_let @ss ~(|string-cat $"color:" ~(_string-cat $"hsl(" ~(_to-string @h_) $", 50%, 50%)"_) $";" $"background-color:" ~(_string-cat $"rgb(" ~(_to-string ~(_random-in-between #0 #255_)_) $"," ~(_to-string ~(_random-in-between #0 #255_)_) $"," ~(_to-string ~(_random-in-between #0 #255_)_) $")"_)|)_) ~(_apply-style-to @ss @nex_)|) @letter ~(_fudge-interval #100_)|)|)_) ~(|bind @change-poem &" poem"(|~(_ff-stop _) ~(_chop @frame_) ~(_cram ~(_format-poem @poem_) @frame_)|)|) ~(|bind @letter-function &" letter"(|~(_start-changing-background @letter_)|)|) ~(|bind @format-poem &" poem"(|~(|do-for-each-letter @letter-function ~(_justify-doc @poem #799_)|)|)|) ~(|bind @change-letter-function &" f"(|~(|bind @letter-function @f|)|)|) ~(_bind @poems [doc](_[doc](_[line](_[word](_[letter]"A"_) [letter]" " [word](_[letter]"r" [letter]"e" [letter]"d"_) [letter]" " [word](_[letter]"w" [letter]"h" [letter]"e" [letter]"e" [letter]"l" [letter]"b" [letter]"a" [letter]"r" [letter]"r" [letter]"o" [letter]"w"_)_) [line](_[newline] [word](_[letter]"w" [letter]"i" [letter]"t" [letter]"h"_) [letter]" " [word](_[letter]"a"_) [letter]" " [word](_[letter]"b" [letter]"o" [letter]"o" [letter]"m"_) [letter]" " [word](_[letter]"b" [letter]"o" [letter]"x"_) [letter]" " [word](_[letter]"i" [letter]"n"_) [letter]" " [word](_[letter]"i" [letter]"t"_) [letter]"."_) [line](_[newline] [word](_[letter]"B" [letter]"a" [letter]"t" [letter]"t" [letter]"e" [letter]"r" [letter]"i" [letter]"e" [letter]"s"_)_) [line](_[newline] [word](_[letter]"a" [letter]"r" [letter]"e"_) [letter]" " [word](_[letter]"i" [letter]"m" [letter]"p" [letter]"o" [letter]"r" [letter]"t" [letter]"a" [letter]"n" [letter]"t"_) [letter]"."_)_)_)_) ~(_import @style-functions_) ~(_import @util-functions_) ~(_import @string-functions_) ~(_import @animation-functions_) ~(_import @layout-functions_) ~(_bind @do-for-each-line &" f doc"(|~(|move-contents-to-doc ~(_do-for-each @f @doc_)|)|)_) ~(_bind @do-for-each-letter &" f doc"(|~(|move-contents-to-doc ~(_do-for-each &" line"(|~(_let @dst ~(_apply-style-to ~(_get-style-from @line_) [word](__)_)_) ~(_do-for-each-and-put-in @f @line @dst_)|) @doc_)|)|)_)|)