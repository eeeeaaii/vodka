v2:~(|begin ~(_bind @results (||)_) ~(_bind @verify &"testval expectedval"(|~(_let @result ~(_equal @testval @expectedval_)_) ~"if then else"(_@result !no ~(_cram (|$"failure" (|$"expected" @expectedval|) (|$"found" @testval|)|) @results_)_)|)_) ~(_bind @verify-true &"val info"(|~"if then else"(_@val !no ~(_cram (|$"failure, was not true" @info|) @results_)_)|)_) ~(_bind @wrap-up &(|~"if then else"(|~(_is-empty @results_) ~(_cram $"all tests passed." @results_) ~(_cram $"some tests failed." @results_)|)|)_) ~(_bind @basic-test &(|~(_verify ~(_math:sum (_#3 #234 #344_)_) #581_) ~(_verify ~(_math:min #3 #42_) #3_) ~(_verify ~(_math:max #3 #42_) #42_) ~(_verify ~(_math:abs #-3_) #3_)|)_) ~(_bind @hex-string-test &(|~(_verify ~(_math:hex-string-of #23_) $"17"_) ~(_verify ~(_math:hex-string-of #54298_) $"d41a"_) ~(_verify ~(_math:hex-string-of #0_) $"0"_) ~(_verify ~(_math:hex-string-of #1_) $"1"_) ~(_verify ~(_math:hex-string-of #15_) $"f"_) ~(_verify ~(_math:hex-string-of #16_) $"10"_) ~(_verify ~(_math:hex-string-of #11259375_) $"abcdef"_)|)_) ~(_bind @random-test &(|~(_let @r ~"math:random-float-between and"(_%10.0 %20.0_)_) ~(_verify-true ~(_and ~(_::gt:: @r %10.0_) ~(_::lt:: @r %20.0_)_) $"rand first one"_) ~(_let @r ~"math:random-float-between and"(_%-1.0 %1.0_)_) ~(_verify-true ~(_and ~(_::lt:: @r %1.0_) ~(_::gt:: @r %-1.0_)_) $"rand second one"_)|)_) ~(_bind @physics-test &(|~(_verify-true ~(_is-float ~(_math:runge-kutta &"n"(|~(_::ti:: @n %2.0_)|) %1.0 %0.1_)_) $"rk"_) ~(_let @t ~(_math:runge-kutta-vector &"n"(|~(_n.scale %1.1_)|) ^"vector:Vector3d"(_%1.0 %2.0 %3.0_) %0.1_)_) ~(_verify-true ~(_is-float @t.x_) $"rkv x"_) ~(_verify-true ~(_is-float @t.y_) $"rkv y"_) ~(_verify-true ~(_is-float @t.z_) $"rkv z"_) ~(_let @lor ~(_math:lorenz ^"vector:Vector3d"(_%2.0 %3.0 %4.0_) %0.1_)_) ~(_verify-true ~(_is-float @lor.x_) $"lor x"_) ~(_verify-true ~(_is-float @lor.y_) $"lor y"_) ~(_verify-true ~(_is-float @lor.z_) $"lor z"_)|)_) ~(_bind @tests &"unused"(|~(_basic-test _) ~(_hex-string-test _) ~(_random-test _) ~(_physics-test _) ~(_wrap-up _) @results|)_) *"tests"(_~(_import @math-functions_)_)|)