v2:~(|begin ~(_bind @results (||)_) ~(_bind @verify &"testval expectedval"(|~(_let @result ~(_equal @testval @expectedval_)_) ~"if then else"(_@result !no ~(_cram (|$"failure" (|$"expected" @expectedval|) (|$"found" @testval|)|) @results_)_)|)_) ~(_bind @verify-true &"_test"(|~(_let @result ~(_eval @test_)_) ~"if then else"(_@result !no ~(_cram (|$"failure, was not true" @test|) @results_)_)|)_) ~(_bind @wrap-up &(|~"if then else"(|~(_is-empty @results_) ~(_cram $"all tests passed." @results_) ~(_cram $"some tests failed." @results_)|)|)_) ~(_bind @set-test &(|~(_use @vector_) ~(_let @v ^"Vector"(_%3.0 %4.0_)_) ~(_verify @v.x %3.0_) ~(_verify @v.y %4.0_) ~(_v.set-x %30.0_) ~(_v.set-y %40.0_) ~(_verify @v.x %30.0_) ~(_verify @v.y %40.0_)|)_) ~(_bind @set-test-3d &(|~(_use @vector_) ~(_let @v ^"Vector3d"(_%3.0 %4.0 %5.0_)_) ~(_verify @v.x %3.0_) ~(_verify @v.y %4.0_) ~(_verify @v.z %5.0_) ~(_v.set-x %30.0_) ~(_v.set-y %40.0_) ~(_v.set-z %50.0_) ~(_verify @v.x %30.0_) ~(_verify @v.y %40.0_) ~(_verify @v.z %50.0_)|)_) ~(_bind @magnitude-test &(|~(_use @vector_) ~(_bind @v ^"Vector"(_%3.0 %4.0_)_) ~(_verify ~(_v.magnitude _) %5.0_)|)_) ~(_bind @magnitude-test-3d &(|~(_use @vector_) ~(_bind @v ^"Vector3d"(_%2.0 %3.0 %6.0_)_) ~(_verify ~(_v.magnitude _) %7.0_)|)_) ~(_bind @rotate-test &(|~(_use @vector_) ~(_bind @v ^"Vector"(_%1.0 %0.0_)_) ~(_set @v ~(_v.rotate ~(_::ti:: %0.5 ~(_get-pi _)_)_)_) ~(_bind @close-to-zero &"n%"(|~(_and ~(_::lt:: @n %0.0001_) ~(_::gt:: @n %-0.0001_)_)|)_) ~(_verify-true ~(_close-to-zero @v.x_)_) ~(_verify @v.y %1.0_)|)_) ~(_bind @scale-test &(|~(_use @vector_) ~(_bind @v ^"Vector"(_%2.0 %1.0_)_) ~(_set @v ~(_v.scale %5.0_)_) ~(_verify @v.x %10.0_) ~(_verify @v.y %5.0_)|)_) ~(_bind @scale-test-3d &(|~(_use @vector_) ~(_bind @v ^"Vector3d"(_%2.0 %1.0 %3.0_)_) ~(_set @v ~(_v.scale %5.0_)_) ~(_verify @v.x %10.0_) ~(_verify @v.y %5.0_) ~(_verify @v.z %15.0_)|)_) ~(_bind @add-test &(|~(_use @vector_) ~(_let @v1 ^"Vector"(_%2.0 %1.0_)_) ~(_let @v2 ^"Vector"(_%3.0 %2.0_)_) ~(_let @v3 ~(_v1.add @v2_)_) ~(_verify @v3.x %5.0_) ~(_verify @v3.y %3.0_)|)_) ~(_bind @add-test-3d &(|~(_use @vector_) ~(_let @v1 ^"Vector3d"(_%2.0 %1.0 %3.0_)_) ~(_let @v2 ^"Vector3d"(_%3.0 %2.0 %5.0_)_) ~(_let @v3 ~(_v1.add @v2_)_) ~(_verify @v3.x %5.0_) ~(_verify @v3.y %3.0_) ~(_verify @v3.z %8.0_)|)_) ~(_bind @tests &"unused"(|~(_set-test _) ~(_set-test-3d _) ~(_magnitude-test _) ~(_magnitude-test-3d _) ~(_rotate-test _) ~(_scale-test _) ~(_scale-test-3d _) ~(_add-test _) ~(_add-test-3d _) ~(_wrap-up _) @results|)_) *"tests"(_~(_import @vector-functions_)_)|)